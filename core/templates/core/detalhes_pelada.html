{% extends "core/base.html" %}

{% block extra_css %}
<!-- estilos locais que não dependem do placeholder -->
{% endblock %}

{% block content %}
<div class="pelada-card">

    <!-- COLUNA INFO ----------------------------------------------------- -->
    <section>
      <h1 class="pelada-titulo">{{ pelada.nome }}</h1>
      {% if pelada.recorrente %}
        <span class="pelada-badge">🔁 Pelada Semanal</span>
      {% endif %}
  
      <div class="info-grid">
  
        <div class="info-box">
          <h4>📅 Data & Horário</h4>
          <p>{{ pelada.data_inicial|date:"d/m/Y" }} às {{ pelada.hora|time:"H:i" }}</p>
          {% if pelada.recorrente %}<p>Repetição semanal</p>{% endif %}
        </div>
  
        <div class="info-box">
          <h4>📍 Local</h4>
          <p>{{ pelada.local }}</p>
        </div>
  
        <div class="info-box">
          <h4>👤 Organizador</h4>
          <p>{{ pelada.organizador.username }}</p>
        </div>
  
        <div class="info-box">
          <h4>🔐 Código de Acesso</h4>
          <p style="word-break:break-all;">{{ pelada.codigo_acesso }}</p>
        </div>
  
      </div>
  
      <!-- BOTÕES -------------------------------------------------------- -->
      <div class="action-row">
        {% if ja_participa %}
          {% if confirmado %}
            <form method="post" action="{% url 'cancelar_presenca' pelada.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-delete">❌ Cancelar Presença</button>
            </form>
          {% else %}
            <form method="post" action="{% url 'confirmar_presenca' pelada.id %}">
              {% csrf_token %}
              <button type="submit" class="btn btn-success">✅ Confirmar Presença</button>
            </form>
          {% endif %}
        {% endif %}
  
        <a href="{% url 'lista_peladas' %}" class="btn btn-back">← Voltar</a>
  
        {% if user == pelada.organizador or user.is_superuser %}
          <a href="{% url 'editar_pelada' pelada.id %}" class="btn btn-edit">✏️ Editar</a>
          <form method="post" action="{% url 'deletar_pelada' pelada.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-delete"
                    onclick="return confirm('Excluir esta pelada?')">🗑️ Excluir</button>
          </form>
        {% endif %}
      </div>
    </section>
  
    <!-- COLUNA PARTICIPANTES ------------------------------------------- -->
    <aside class="lista-participantes">
      <h3>Participantes</h3>
      {% for p in presencas %}
        <div class="participante">
          <span>{{ p.jogador.nome }}</span>
          {% if p.confirmado %}<span class="check">✔</span>{% endif %}
        </div>
      {% empty %}
        <p style="padding:16px; text-align:center;">Nenhum participante</p>
      {% endfor %}
    </aside>
  
  </div>
  
{% endblock %}
